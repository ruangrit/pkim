<h1>Random Image Block</h1><h2>Description</h2><p>This Drupal 7.x Random Image Block module displays random images taken from a specified directory. It obtains its list of images to display by requiring a php file (imageList.php) which defines one function which returns a keyed-array of keyed-arrays. This random image block is not cached so a new image is displayed for each hit to the website.</p><h2>Installation</h2><p>Download (or clone from git://github.com/stephengaito/drupal-randomImageBlock.git ) and move the contents to your Drupal modules directory.</p><p>Once you have enabled the module from the Drupal modules page, you can then go to </p><pre>Admin | Structure | Blocks</pre><p>page to set which region you want the random image block to be displayed in. </p><p>On the block page you will see a &quot;configure&quot; link to the right of the random image block, clicking on this link will take you to the standard block configuraiton page. The random image block has three additional variables (all text) which you may need to change to suit your website's needs.</p><ul><li><strong>Image Directory</strong> This is the directory, usually placed in your Drupal's public files directory, from which the images will be served by your webserver. You will need to ensure that you have manually created this directory and populated it with the images you want to randomly display in your block. You should also ensure that your webserver knows how to server these images as static files.</li></ul><ul><li><strong>Image List PHP</strong> This is a PHP file which defines the global function random_image_block_get_image_list(). The image list php is loaded relative to the image directory. This global function (which takes no arguments) returns a keyed-array of keyed-arrays. The outer array holds one keyed-array for each image to be displayed. Each of the inner arrays defines the following values/keys:<ul><li><strong>id</strong> uniquely idenfies the full image associated with the current image. The original use of this module was to serve random banner images cropped from larger images taken from Flickr.</li><li><strong>url</strong> the basename of the image to be served. </li><li><strong>title</strong> a title for the image.</li><li><strong>shortTitle</strong> a short title for the image.</li><li><strong>width</strong> the width of the image.</li><li><strong>height</strong> the height of the image.</li><li><strong>license</strong> an html link to the license used by this image.</li><li><strong>shortCC</strong> the short Creative Commons indicator for this license (by, by-sa, etc)</li><li><strong>accessedOn</strong> the date on which this image's license was last accessed.</li><li><strong>nameHtml</strong> an html link to the photo stream or website associated with the image's owner. Use to give credit to the image owner.</li><li><strong>shareHtml</strong> an html fragment which can be used to display the full image in order to give the image's owner appropriate Creative Commons credit.</li></ul></li></ul><ul><li><strong>Redirect URL</strong> The randomly displayed image is actually a standard HTML link. The redirect URL provides the href for this link. This url can be as simple as &quot;node/1&quot;.</li></ul><h2>Usage</h2><p>Once enabled in a given region in your theme, a different randomly selected image should be displayed for each hit on your website.</p><p>The Random Image Block module defines Drupal7 tokens which can be used to embed any of the information specified in the Image List PHP structure, in any arbitrary node on your website. To make full use of these tokens, you will need to install and enable the Token Filter module, <em>and</em> you will need to specifically include the use of the Token Filter module in one or more of your Text Formats (by going to your Drupal websites </p><pre>Admin | Configuration | Content authoring | Text Format</pre><p>page).</p><p>Most of the tokens take an additional variable tag which is the primary key into the outer keyed-array returned by the random_image_block_get_image_list function. You can also use the additional variable tag 'current-image' to specify the requested information for the currently displayed random image. In the list of tokens, below, this variable tag is represented by '?'.</p><p>The tokens defined are:</p><ul><li><strong>[rib:credits]</strong> an html fragment which credits the owners of all images currently displayed by the random image block.</li><li><strong>[rib:credit:?]</strong> an html fragment which credits the owner of the specified image (note the last tag is a variable tag).</li><li><strong>[rib:url:?]</strong> the url for the specified image.</li><li><strong>[rib:title:?]</strong> the title for the specified image.</li><li><strong>[rib:shortTitle:?]</strong> the short title for the specified image.</li><li><strong>[rib:width:?]</strong> the width of the specified image.</li><li><strong>[rib:height:?]</strong> the height of the specified image.</li><li><strong>[rib:license:?]</strong> an html link to the license for the specified image.</li><li><strong>[rib:shortCC:?]</strong> the Creative Commons indicator for the specified image (by, by-sa, etc).</li><li><strong>[rib:accessedOn:?]</strong> the date on which the specified image's license was last checked.</li><li><strong>[rib:nameHtml:?]</strong> an html link to the photo stream or website associated with the specified image's owner. Used to credit the image's owner.</li><li><strong>[rib:shareHtml:?]</strong> an html fragment which includes a small version of the full image in the image owner's photo stream or website. Used to credit the image's owner.</li></ul><h2>Online Help</h2><p>This README file is provided online via the Druapl Advanced Help module. To read it go to the </p><pre>  Admin | Advanced Help | Random Image Block | About Random Image Block </pre><h2>Dependencies</h2><p>The Random Image Block module depends upon the following Drupal 7.x modules:</p><ul><li>Block (core module)</li><li>Token (core module)</li><li>Token Filter</li><li>Advanced Help</li></ul><h2>Example imageList.php file</h2><p>The following code provides an example (statically defined) imageList.php file. Note the use of a function scoped static variable.</p><pre>
&lt;?php 

/*
 * Copyright (c) .....
 */

function random_image_block_get_image_list() {
  static $imageList;
  if (! isset($imageList) ) {
    $imageList = Array(
      'flickr-185092747-mouse-eyes-banner.jpg' =&gt; Array (
        'id'         =&gt; &quot;185092747&quot;,
        'url'        =&gt; &quot;flickr-185092747-mouse-eyes-banner.jpg&quot;,
        'title'      =&gt; &quot;mouse (mouse eyes)&quot;,
        'shortTitle' =&gt; &quot;mouse&quot;,
        'width'      =&gt;  940,
        'height'     =&gt;  100,
        'license'    =&gt; &quot;http://creativecommons.org/licenses/by/2.0/&quot;,
        'shortCC'    =&gt; &quot;by&quot;,
        'accessedOn' =&gt; &quot;2012-02-05&quot;,
        'nameHtml'   =&gt; &quot;&lt;a href=\&quot;http://www.flickr.com/photos/braydawg/\&quot;&gt;BRAYDAWG&lt;/a&gt;&quot;,
        'shareHtml'  =&gt; &quot;&lt;a href=\&quot;http://www.flickr.com/photos/braydawg/185092747/\&quot; title=\&quot;mouse by BRAYDAWG, on Flickr\&quot;&gt;&lt;img src=\&quot;http://farm1.staticflickr.com/71/185092747_9c240a557e_m.jpg\&quot; width=\&quot;240\&quot; height=\&quot;160\&quot; alt=\&quot;mouse\&quot;&gt;&lt;/a&gt;&quot;
      ),

...

      'flickr-6007008906-mouse-banner.jpg' =&gt; Array (
        'id'         =&gt; &quot;6007008906&quot;,
        'url'        =&gt; &quot;flickr-6007008906-mouse-banner.jpg&quot;,
        'title'      =&gt; &quot;Field Mouse-Explore 8/31/11 #431 (mouse)&quot;,
        'shortTitle' =&gt; &quot;Field Mouse-Explore 8/31/11 #431&quot;,
        'width'      =&gt;  940,
        'height'     =&gt;  100,
        'license'    =&gt; &quot;http://creativecommons.org/licenses/by/2.0/&quot;,
        'shortCC'    =&gt; &quot;by&quot;,
        'accessedOn' =&gt; &quot;2012-02-05&quot;,
        'nameHtml'   =&gt; &quot;&lt;a href=\&quot;http://www.flickr.com/photos/goingslo/\&quot;&gt;goingslo&lt;/a&gt;&quot;,
        'shareHtml'  =&gt; &quot;&lt;a href=\&quot;http://www.flickr.com/photos/goingslo/6007008906/\&quot; title=\&quot;Field Mouse-Explore 8/31/11 #431 by goingslo, on Flickr\&quot;&gt;&lt;img src=\&quot;http://farm7.staticflickr.com/6123/6007008906_387ba92104_m.jpg\&quot; width=\&quot;240\&quot; height=\&quot;155\&quot; alt=\&quot;Field Mouse-Explore 8/31/11 #431\&quot;&gt;&lt;/a&gt;&quot;
      ),
    );
  }
  return $imageList;
}
</pre><p>Alternatively, it is entirely possible for you to provide php code which obtains this information by dynamically searching through the image directory. However using staticly defined php arrays together with the use of php caching (such as APC) probably greatly reduces the over all load on your webserver.</p><h2>Future development</h2><p>This is not a project/module on the Drupal 7.x website. While I need this random image block module for my own website, I do not currently have the time or resources to maintain this as any official project/module.</p><p>However I have seen enough requests for a random image block that I felt it would be useful to others as is. As such I have tried to tidy it up and provide sufficient documentation so that others can make use of it. To ensure others have access to this module, I have placed my sources on GitHub ( <a href="https://github.com/stephengaito/drupal-randomImageBlock">https://github.com/stephengaito/drupal-randomImageBlock</a> )</p><p>I welcome anyone who wants to extend or develop this module further, to fork this GitHub project ( git://github.com/stephengaito/drupal-randomImageBlock.git ).</p><p>Sharing is great.</p><h2>License</h2><p>This module was originally based on the Drupal7</p><ul><li>Block example</li><li>Token example</li><li>Advanced Help example</li></ul><p>Alterations are Copyright (C) 2012 PerceptiSys Ltd.</p><p>Licensed for reuse using the Lesser Gnu Public License (LGPL) version 3.0 or later. See: <a href="http://www.gnu.org/licenses/lgpl.html">http://www.gnu.org/licenses/lgpl.html</a></p><p>THIS SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>